# @darkblue #1C1C2A
# @lightblue #37374E
# @inactive #525266
# @active #D5D5DA

set-option -sa terminal-overrides ",xterm*:Tc"
set -g base-index 1
set -g mouse on
set-option -g renumber-windows on

unbind C-b
set -g prefix `
bind ` send-prefix

unbind %
unbind t

bind E select-layout even-horizontal
bind-key R refresh-client

bind S command-prompt -p "New Session:" "new-session -A -s '%%'"
bind-key a choose-tree -Zs
bind k confirm kill-session
bind r split-window -v -c "#{pane_current_path}"
bind e split-window -h -c "#{pane_current_path}"
bind & kill-window
bind x kill-pane
bind c new-window -c "#{pane_current_path}"
bind C-t clock-mode
bind h select-layout even-horizontal

# Status Bar
set-option -g status-position bottom
set-option -g status-style bg=default
set-option -g status-left-length 20
set-option -g status-left "#{?client_prefix,#[fg=#D5D5DA]#[bold],#[fg=#525266]}#S "
set-option -g status-right ""
set-option -g status-justify left
set-window-option -g window-status-format "#[fg=#525266] • "
set-window-option -g window-status-current-format "#[fg=#D5D5DA,bold] • "

# Panes
set -g pane-border-style fg=#1C1C2A
set -g pane-active-border-style fg=#37374E

# Floating windows
set -g popup-style bg=default,fg=#D5D5DA
set -g popup-border-style fg=#37374E
set -g popup-border-lines rounded

# Copy mode
set -g mode-style bg=#37374E,fg=#D5D5DA
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel
setw -g mode-keys vi


bind t display-popup -E ""
bind s display-popup -E -w 60% -h 40% "tmux list-sessions | sed 's/:.*//' | fzf --reverse | xargs tmux switch-client -t"
bind g display-popup -E -w 80% -h 60% "cd #{pane_current_path} && lazygit"

#tpm
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'christoomey/vim-tmux-navigator'

set -g @plugin 'sainnhe/tmux-fzf'
TMUX_FZF_ORDER="session|window|pane|command|keybinding|clipboard|process"

set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

run '~/.tmux/plugins/tpm/tpm'

set -g @resurrect-capture-pane-contents 'off'
set -g @continuum-restore 'on'
